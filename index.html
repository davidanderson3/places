<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Places</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link id="page-style" rel="stylesheet" />
  <script>
    document.getElementById('page-style').href = 'style.css?v=' + Date.now();
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon.png">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <section id="goalsView">
    <nav class="navbar">
      <div class="container navbar-inner">
        <div class="navbar-left site-name">Places</div>
        <div class="navbar-right">
          <button type="button" id="loginBtn" style="display:none;">Sign In</button>
          <button type="button" id="logoutBtn" style="display:none;">Sign Out</button>
        </div>
      </div>
      <div class="tabs scroll-tabs" id="tabsContainer" style="visibility:hidden;">
        <button class="tab-button active" data-target="travelPanel">Places</button>
      </div>
    </nav>

    <div id="travelPanel" class="main-layout" style="display:none">
      <div class="full-column">
        <div id="placeSearchRow">
          <input id="placeSearch" type="text" placeholder="Search all places or coordinates..." autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" name="place-search" enterkeyhint="search">
          <button type="button" id="placeSearchBtn">Search</button>
        </div>
        <ul id="placeResults" class="search-results"></ul>
        
        <div id="travelMapWrapper">
          <div id="placemarkList"></div>
          <div id="travelMap"></div>
          <div id="travelTagFilters"></div>
        </div>
        <input id="travelSearch" type="text" placeholder="Filter my places..." style="margin:8px 0;max-width:260px;">
        <label id="showVisitedLabel">
          <input id="showVisitedToggle" type="checkbox">
          <span>Include visited</span>
        </label>
        <div id="placeCount" style="margin:8px 0;"></div>
        <div id="paginationControls" style="margin:8px 0; display:flex; align-items:center; gap:8px;">
          <button type="button" id="prevPageBtn">Prev</button>
          <span id="pageInfo"></span>
          <button type="button" id="nextPageBtn">Next</button>
        </div>
        <table id="travelTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Tags</th>
              <th>Rating</th>
              <th>Date</th>
              <th>Visited</th>
              <th>Distance (mi)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Modal for adding a place -->
  <div id="addPlaceModal" class="modal" style="display:none;">
    <div class="modal-content" style="max-height:80vh;overflow:auto;">
      <h3>Add Place</h3>
      <form id="addPlaceForm">
        <div style="margin-bottom:8px;">
          <label>Name<br><input type="text" id="placeName" required /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Description<br><input type="text" id="placeDescription" /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Categories</label>
          <div id="placeTags"></div>
          <input type="text" id="extraTags" placeholder="Additional categories (comma separated)" style="margin-top:8px;width:100%;" />
        </div>
        <div style="margin-bottom:8px;">
          <label>Rating<br><input type="text" id="placeRating" /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Date<br><input type="date" id="placeDate" /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label><input type="checkbox" id="placeVisited" /> Visited</label>
        </div>
        <div class="modal-actions" style="margin-top:1em;">
          <button type="button" id="placeCancel">Cancel</button>
          <button type="submit">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div id="contactModal" class="modal" style="display:none;">
    <div class="modal-content" style="max-width:400px;width:90%;max-height:80vh;overflow:auto;">
      <h3>Contact Developer</h3>
      <form id="contactForm">
        <div style="margin-bottom:8px;">
          <label>Name<br><input type="text" id="contactName" /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Email<br><input type="email" id="contactEmailInput" required /></label>
        </div>
        <div style="margin-bottom:8px;">
          <label>Message<br><textarea id="contactMessage" required style="width:100%;height:100px;"></textarea></label>
        </div>
        <div class="modal-actions" style="margin-top:1em;">
          <button type="submit">Send</button>
          <button type="button" id="contactCancelBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://apis.google.com/js/api.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script type="module" src="js/main.js?v=20250829"></script>
  <script type="module" src="js/travel.js?v=20250829"></script>
</body>
</html>
